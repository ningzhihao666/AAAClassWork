成为正式用户

参与者：游客
简要描述：游客通过填写信息或者第三方登录的方式，完成账户创建流程，从游客身份转变为正式用户，进而获取访问特定功能的权限。

前置条件:系统终端网络连接正常。云数据库空间足够，且正常工作。
后置条件:游客成功转变为正式用户，系统自动更新用户信息，新用户数据存储到数据库中。

事件流
 基本流

    1.游客点击“成为正式用户”按钮之后，用况开始启动。
    2.系统显示与成为正式用户相关的界面，提供两个选项 - 直接注册成为正式用户和第三方登录成为正式用户选项。
    {选择成为正式用户的方式}
    3.游客选择直接注册成为正式用户方式，并完成信息提交。
    {验证成为正式用户的信息}
    4.系统执行子流<验证信息> (S5)。
    5.系统自动登录，然后显示成为正式用户成功提示。
    6.用况终止。

备选流
A1 “采用第三方账号登录成为正式用户”（特定备选流）
扩展点及其触发条件：在 {选择成为正式用户的方式} 扩展点上，当游客选择第三方登录的时候。

    1.系统根据游客选择的第三方平台，跳转至对应的第三方授权界面。
    2.用户在第三方平台完成身份验证并且授权。
    3.第三方系统将验证成功的凭证和用户基本信息返回给本系统。
    4.系统接收基本信息，创建本地账户并且完成登录，游客正式成为本系统正式用户。
    5.事件流恢复：接着基本流第5步显示成为正式用户成功提示之前，即系统完成登录后直接进入显示成为正式用户成功提示环节。

A2 “处理无效成为正式用户的信息”（特定备选流）
扩展点及其触发条件：在 {验证成为正式用户的信息} 扩展点上，当系统验证发现信息有误（比如用户名已经存在，格式错误等）。

    1.系统在注册表单对应的位置提示具体的错误信息（如"该用户名已存在"）。
    2.系统保留游客已填写的其他正确信息。
    3.事件流恢复：恢复到基本流第3步的信息提交环节，游客根据提示修正错误信息后重新提交。

子流：
S5 验证消息
    1.系统获取游客输入的所有注册消息
    2.系统检查输入的消息格式是否正确
    3.系统检查当前输入的用户名是否已经被占用
    4.如果信息有效，将注册信息保存到云数据库
